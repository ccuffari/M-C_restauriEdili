<!-- sidebar.html -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h3><i class="fas fa-hard-hat"></i> Menu Cantieri</h3>
    </div>
    
    <div class="sidebar-menu">
        <div class="menu-section">
            <h4><i class="fas fa-home"></i> Navigazione</h4>
            <a href="index.html" class="menu-item">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard Principale</span>
            </a>
            <a href="cantieri.html" class="menu-item active">
                <i class="fas fa-hard-hat"></i>
                <span>Gestione Cantieri</span>
            </a>
            <a href="lavoro.html" class="menu-item">
                <i class="fas fa-calendar-alt"></i>
                <span>Giornate Lavorative</span>
            </a>
        </div>
        
        <div class="menu-section">
            <h4><i class="fas fa-tools"></i> Operazioni</h4>
            <a href="#" class="menu-item" id="newCantiereBtn">
                <i class="fas fa-plus-circle"></i>
                <span>Nuovo Cantiere</span>
            </a>
            <a href="#" class="menu-item" id="exportCantieriBtn">
                <i class="fas fa-file-export"></i>
                <span>Esporta Dati</span>
            </a>
            <a href="#" class="menu-item" id="printListBtn">
                <i class="fas fa-print"></i>
                <span>Stampa Lista</span>
            </a>
        </div>
        
        <div class="menu-section">
            <h4><i class="fas fa-chart-bar"></i> Report</h4>
            <a href="#" class="menu-item">
                <i class="fas fa-chart-line"></i>
                <span>Statistiche</span>
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-euro-sign"></i>
                <span>Analisi Costi</span>
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-clock"></i>
                <span>Andamento Lavori</span>
            </a>
        </div>
        
        <div class="menu-section">
            <h4><i class="fas fa-cog"></i> Impostazioni</h4>
            <a href="#" class="menu-item" id="settingsBtn">
                <i class="fas fa-sliders-h"></i>
                <span>Impostazioni Sistema</span>
            </a>
            <a href="#" class="menu-item" id="helpBtn">
                <i class="fas fa-question-circle"></i>
                <span>Guida & Supporto</span>
            </a>
        </div>
        
        <div class="sidebar-footer">
            <p class="small-text">
                <i class="fas fa-info-circle"></i>
                <span>Versione: 2.4.1 | Sistema attivo</span>
            </p>
        </div>
    </div>
</div>

<!-- Overlay per mobile -->
<div class="sidebar-overlay" id="sidebarOverlay"></div>

<script>
// Script per gestire la sidebar
document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const newCantiereBtn = document.getElementById('newCantiereBtn');
    const exportCantieriBtn = document.getElementById('exportCantieriBtn');
    const printListBtn = document.getElementById('printListBtn');
    const settingsBtn = document.getElementById('settingsBtn');
    const helpBtn = document.getElementById('helpBtn');
    
    // Toggle sidebar su mobile
    if (menuToggle) {
        menuToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            sidebar.classList.toggle('show');
            if (sidebarOverlay) {
                sidebarOverlay.classList.toggle('show');
            }
        });
    }
    
    // Chiudi sidebar quando si clicca sull'overlay
    if (sidebarOverlay) {
        sidebarOverlay.addEventListener('click', function() {
            sidebar.classList.remove('show');
            this.classList.remove('show');
        });
    }
    
    // Chiudi sidebar quando si clicca fuori (su mobile)
    document.addEventListener('click', function(e) {
        if (window.innerWidth <= 991) {
            if (!sidebar.contains(e.target) && 
                !menuToggle.contains(e.target) && 
                sidebar.classList.contains('show')) {
                sidebar.classList.remove('show');
                if (sidebarOverlay) {
                    sidebarOverlay.classList.remove('show');
                }
            }
        }
    });
    
    // Gestione click su menu items
    if (newCantiereBtn) {
        newCantiereBtn.addEventListener('click', function(e) {
            e.preventDefault();
            const addCantiereBtn = document.getElementById('addCantiereBtn');
            if (addCantiereBtn) {
                addCantiereBtn.click();
            }
            closeSidebarMobile();
        });
    }
    
    if (exportCantieriBtn) {
        exportCantieriBtn.addEventListener('click', function(e) {
            e.preventDefault();
            alert('Funzionalità di esportazione dati in sviluppo');
            closeSidebarMobile();
        });
    }
    
    if (printListBtn) {
        printListBtn.addEventListener('click', function(e) {
            e.preventDefault();
            window.print();
            closeSidebarMobile();
        });
    }
    
    if (settingsBtn) {
        settingsBtn.addEventListener('click', function(e) {
            e.preventDefault();
            alert('Impostazioni sistema - Funzionalità in sviluppo');
            closeSidebarMobile();
        });
    }
    
    if (helpBtn) {
        helpBtn.addEventListener('click', function(e) {
            e.preventDefault();
            alert('Guida e supporto - Contattare l\'amministratore di sistema');
            closeSidebarMobile();
        });
    }
    
    // Funzione per chiudere la sidebar su mobile
    function closeSidebarMobile() {
        if (window.innerWidth <= 991) {
            sidebar.classList.remove('show');
            if (sidebarOverlay) {
                sidebarOverlay.classList.remove('show');
            }
        }
    }
    
    // Aggiungi classe active basata sulla pagina corrente
    const currentPage = window.location.pathname.split('/').pop();
    document.querySelectorAll('.menu-item').forEach(item => {
        if (item.getAttribute('href') === currentPage) {
            item.classList.add('active');
        }
    });
    
    // Gestione resize
    window.addEventListener('resize', function() {
        if (window.innerWidth > 991) {
            sidebar.classList.remove('show');
            if (sidebarOverlay) {
                sidebarOverlay.classList.remove('show');
            }
        }
    });
});
</script>